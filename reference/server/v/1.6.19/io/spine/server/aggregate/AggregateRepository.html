<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>AggregateRepository (server 1.6.19 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AggregateRepository (server 1.6.19 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/spine/server/aggregate/AggregatePartRepository.html" title="class in io.spine.server.aggregate"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/spine/server/aggregate/AggregateRoot.html" title="class in io.spine.server.aggregate"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/spine/server/aggregate/AggregateRepository.html" target="_top">Frames</a></li>
<li><a href="AggregateRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.spine.server.aggregate</div>
<h2 title="Class AggregateRepository" class="title">Class AggregateRepository&lt;I,A extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;I,?,?&gt;&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">io.spine.server.entity.Repository</a>&lt;I,A&gt;</li>
<li>
<ul class="inheritance">
<li>io.spine.server.aggregate.AggregateRepository&lt;I,A&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>I</code> - the type of the aggregate IDs</dd>
<dd><code>A</code> - the type of the aggregates managed by this repository</dd>
</dl>
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>io.spine.logging.Logging, <a href="../../../../io/spine/server/bus/MessageDispatcher.html" title="interface in io.spine.server.bus">MessageDispatcher</a>&lt;<a href="../../../../io/spine/server/type/CommandClass.html" title="class in io.spine.server.type">CommandClass</a>,<a href="../../../../io/spine/server/type/CommandEnvelope.html" title="class in io.spine.server.type">CommandEnvelope</a>&gt;, <a href="../../../../io/spine/server/bus/UnicastDispatcher.html" title="interface in io.spine.server.bus">UnicastDispatcher</a>&lt;<a href="../../../../io/spine/server/type/CommandClass.html" title="class in io.spine.server.type">CommandClass</a>,<a href="../../../../io/spine/server/type/CommandEnvelope.html" title="class in io.spine.server.type">CommandEnvelope</a>&gt;, <a href="../../../../io/spine/server/Closeable.html" title="interface in io.spine.server">Closeable</a>, <a href="../../../../io/spine/server/commandbus/CommandDispatcher.html" title="interface in io.spine.server.commandbus">CommandDispatcher</a>, <a href="../../../../io/spine/server/entity/EventProducingRepository.html" title="interface in io.spine.server.entity">EventProducingRepository</a>, java.lang.AutoCloseable</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../io/spine/server/aggregate/AggregatePartRepository.html" title="class in io.spine.server.aggregate">AggregatePartRepository</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">AggregateRepository&lt;I,A extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;I,?,?&gt;&gt;</span>
extends <a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;I,A&gt;
implements <a href="../../../../io/spine/server/commandbus/CommandDispatcher.html" title="interface in io.spine.server.commandbus">CommandDispatcher</a>, <a href="../../../../io/spine/server/entity/EventProducingRepository.html" title="interface in io.spine.server.entity">EventProducingRepository</a></pre>
<div class="block">The repository which manages instances of <code>Aggregate</code>s.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate"><code>Aggregate</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#AggregateRepository--">AggregateRepository</a></span>()</code>
<div class="block">Creates a new instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../io/spine/server/aggregate/model/AggregateClass.html" title="class in io.spine.server.aggregate.model">AggregateClass</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#aggregateClass--">aggregateClass</a></span>()</code>
<div class="block">Obtains class information of aggregates managed by this repository.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../io/spine/server/aggregate/AggregateStorage.html" title="class in io.spine.server.aggregate">AggregateStorage</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#aggregateStorage--">aggregateStorage</a></span>()</code>
<div class="block">Returns the storage assigned to this aggregate.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#close--">close</a></span>()</code>
<div class="block">Closes the repository by closing the underlying storage.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#create-I-">create</a></span>(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id)</code>
<div class="block">Create a new entity instance with its default state.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../io/spine/server/aggregate/AggregateStorage.html" title="class in io.spine.server.aggregate">AggregateStorage</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#createStorage--">createStorage</a></span>()</code>
<div class="block">Creates aggregate storage for the repository.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#dispatch-io.spine.server.type.CommandEnvelope-">dispatch</a></span>(<a href="../../../../io/spine/server/type/CommandEnvelope.html" title="class in io.spine.server.type">CommandEnvelope</a>&nbsp;cmd)</code>
<div class="block">Dispatches the passed command to an aggregate.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#dispatchEvent-io.spine.server.type.EventEnvelope-">dispatchEvent</a></span>(<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&nbsp;event)</code>
<div class="block">Dispatches event to one or more aggregates reacting on the event.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#doLoadOrCreate-I-">doLoadOrCreate</a></span>(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#domesticEvents--">domesticEvents</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#doStore-A-">doStore</a></span>(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;aggregate)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../io/spine/server/event/EventBus.html" title="class in io.spine.server.event">EventBus</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#eventBus--">eventBus</a></span>()</code>
<div class="block">Obtains the <code>EventBus</code> to which the repository posts.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#events--">events</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#externalEvents--">externalEvents</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.util.Optional&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#find-I-">find</a></span>(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id)</code>
<div class="block">Loads an aggregate by the passed ID.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#importableEvents--">importableEvents</a></span>()</code>
<div class="block">Obtains classes of events that can be imported by aggregates of this repository.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/CommandClass.html" title="class in io.spine.server.type">CommandClass</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#messageClasses--">messageClasses</a></span>()</code>
<div class="block">Obtains a set of message classes that can be processed by this dispatcher.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#outgoingEvents--">outgoingEvents</a></span>()</code>
<div class="block">Obtains classes of the events produced by entities of this repository.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#play-I-io.spine.server.aggregate.AggregateHistory-">play</a></span>(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id,
    io.spine.server.aggregate.AggregateHistory&nbsp;history)</code>
<div class="block">Plays the given Aggregate history for an instance
 of <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate"><code>Aggregate</code></a> with the given ID.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#registerWith-io.spine.server.BoundedContext-">registerWith</a></span>(<a href="../../../../io/spine/server/BoundedContext.html" title="class in io.spine.server">BoundedContext</a>&nbsp;context)</code>
<div class="block">Initializes the repository during its registration with its context.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#setSnapshotTrigger-int-">setSnapshotTrigger</a></span>(int&nbsp;snapshotTrigger)</code>
<div class="block">Changes the number of events between making aggregate snapshots to the passed value.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#setupCommandRouting-io.spine.server.route.CommandRouting-">setupCommandRouting</a></span>(<a href="../../../../io/spine/server/route/CommandRouting.html" title="class in io.spine.server.route">CommandRouting</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;routing)</code>
<div class="block">A callback for derived classes to customize routing schema for commands.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#setupEventRouting-io.spine.server.route.EventRouting-">setupEventRouting</a></span>(<a href="../../../../io/spine/server/route/EventRouting.html" title="class in io.spine.server.route">EventRouting</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;routing)</code>
<div class="block">A callback for derived classes to customize routing schema for events.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#setupImportRouting-io.spine.server.route.EventRouting-">setupImportRouting</a></span>(<a href="../../../../io/spine/server/route/EventRouting.html" title="class in io.spine.server.route">EventRouting</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;routing)</code>
<div class="block">A callback for derived classes to customize routing schema for importable events.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#snapshotTrigger--">snapshotTrigger</a></span>()</code>
<div class="block">Returns the number of events until a next <code>Snapshot</code> is made.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#store-A-">store</a></span>(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;aggregate)</code>
<div class="block">Stores the passed aggregate and commits its uncommitted events.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../io/spine/server/aggregate/model/AggregateClass.html" title="class in io.spine.server.aggregate.model">AggregateClass</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#toModelClass-java.lang.Class-">toModelClass</a></span>(java.lang.Class&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;&nbsp;cls)</code>
<div class="block">Obtains a model class for the passed entity class value.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.entity.Repository">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;io.spine.server.entity.<a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a></h3>
<code><a href="../../../../io/spine/server/entity/Repository.html#checkStorage-S-">checkStorage</a>, <a href="../../../../io/spine/server/entity/Repository.html#context--">context</a>, <a href="../../../../io/spine/server/entity/Repository.html#entityClass--">entityClass</a>, <a href="../../../../io/spine/server/entity/Repository.html#entityStateType--">entityStateType</a>, <a href="../../../../io/spine/server/entity/Repository.html#eventFilter--">eventFilter</a>, <a href="../../../../io/spine/server/entity/Repository.html#hasContext--">hasContext</a>, <a href="../../../../io/spine/server/entity/Repository.html#idClass--">idClass</a>, <a href="../../../../io/spine/server/entity/Repository.html#index--">index</a>, <a href="../../../../io/spine/server/entity/Repository.html#isOpen--">isOpen</a>, <a href="../../../../io/spine/server/entity/Repository.html#isRegistered--">isRegistered</a>, <a href="../../../../io/spine/server/entity/Repository.html#iterator-java.util.function.Predicate-">iterator</a>, <a href="../../../../io/spine/server/entity/Repository.html#onRegistered--">onRegistered</a>, <a href="../../../../io/spine/server/entity/Repository.html#open--">open</a>, <a href="../../../../io/spine/server/entity/Repository.html#storage--">storage</a>, <a href="../../../../io/spine/server/entity/Repository.html#storageAssigned--">storageAssigned</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.commandbus.CommandDispatcher">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.server.commandbus.<a href="../../../../io/spine/server/commandbus/CommandDispatcher.html" title="interface in io.spine.server.commandbus">CommandDispatcher</a></h3>
<code><a href="../../../../io/spine/server/commandbus/CommandDispatcher.html#dispatchesCommands--">dispatchesCommands</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.bus.MessageDispatcher">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.server.bus.<a href="../../../../io/spine/server/bus/MessageDispatcher.html" title="interface in io.spine.server.bus">MessageDispatcher</a></h3>
<code><a href="../../../../io/spine/server/bus/MessageDispatcher.html#canDispatch-E-">canDispatch</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.entity.EventProducingRepository">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.server.entity.<a href="../../../../io/spine/server/entity/EventProducingRepository.html" title="interface in io.spine.server.entity">EventProducingRepository</a></h3>
<code><a href="../../../../io/spine/server/entity/EventProducingRepository.html#eventFilter--">eventFilter</a>, <a href="../../../../io/spine/server/entity/EventProducingRepository.html#filter-java.util.Collection-">filter</a>, <a href="../../../../io/spine/server/entity/EventProducingRepository.html#postEvents-java.util.Collection-">postEvents</a>, <a href="../../../../io/spine/server/entity/EventProducingRepository.html#postIfCommandRejected-io.spine.server.type.SignalEnvelope-java.lang.Throwable-">postIfCommandRejected</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.Closeable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.server.<a href="../../../../io/spine/server/Closeable.html" title="interface in io.spine.server">Closeable</a></h3>
<code><a href="../../../../io/spine/server/Closeable.html#checkOpen--">checkOpen</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.logging.Logging">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.logging.Logging</h3>
<code>_config, _debug, _error, _fine, _finer, _finest, _info, _severe, _trace, _warn, debugLevel, errorLevel, logger, loggerFor</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AggregateRepository--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AggregateRepository</h4>
<pre>protected&nbsp;AggregateRepository()</pre>
<div class="block">Creates a new instance.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="registerWith-io.spine.server.BoundedContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerWith</h4>
<pre>@OverridingMethodsMustInvokeSuper
public&nbsp;void&nbsp;registerWith(<a href="../../../../io/spine/server/BoundedContext.html" title="class in io.spine.server">BoundedContext</a>&nbsp;context)</pre>
<div class="block">Initializes the repository during its registration with its context.

 <p>Verifies that the class of aggregates of this repository subscribes to at least one
 type of messages.

 <p>Registers itself with <a href="../../../../io/spine/server/commandbus/CommandBus.html" title="class in io.spine.server.commandbus"><code>CommandBus</code></a>,
 <a href="../../../../io/spine/server/event/EventBus.html" title="class in io.spine.server.event"><code>EventBus</code></a>, and
 <a href="../../../../io/spine/server/aggregate/ImportBus.html" title="class in io.spine.server.aggregate"><code>ImportBus</code></a> of the context for dispatching
 messages to its aggregates.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#registerWith-io.spine.server.BoundedContext-">registerWith</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context of this repository</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if the aggregate class does not handle any messages</dd>
</dl>
</li>
</ul>
<a name="eventBus--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eventBus</h4>
<pre>public final&nbsp;<a href="../../../../io/spine/server/event/EventBus.html" title="class in io.spine.server.event">EventBus</a>&nbsp;eventBus()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/spine/server/entity/EventProducingRepository.html#eventBus--">EventProducingRepository</a></code></span></div>
<div class="block">Obtains the <code>EventBus</code> to which the repository posts.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/EventProducingRepository.html#eventBus--">eventBus</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/spine/server/entity/EventProducingRepository.html" title="interface in io.spine.server.entity">EventProducingRepository</a></code></dd>
</dl>
</li>
</ul>
<a name="setupCommandRouting-io.spine.server.route.CommandRouting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupCommandRouting</h4>
<pre>protected&nbsp;void&nbsp;setupCommandRouting(<a href="../../../../io/spine/server/route/CommandRouting.html" title="class in io.spine.server.route">CommandRouting</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;routing)</pre>
<div class="block">A callback for derived classes to customize routing schema for commands.

 <p>Default routing returns the value of the first field of a command message.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routing</code> - the routing schema to customize</dd>
</dl>
</li>
</ul>
<a name="setupEventRouting-io.spine.server.route.EventRouting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupEventRouting</h4>
<pre>protected&nbsp;void&nbsp;setupEventRouting(<a href="../../../../io/spine/server/route/EventRouting.html" title="class in io.spine.server.route">EventRouting</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;routing)</pre>
<div class="block">A callback for derived classes to customize routing schema for events.

 <p>Default routing returns the ID of the entity which
 produced the event.
 This allows to “link” different kinds of entities by having the same class of IDs.
 More complex scenarios (e.g. one-to-many relationships) may require custom routing schemas.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routing</code> - the routing schema to customize</dd>
</dl>
</li>
</ul>
<a name="setupImportRouting-io.spine.server.route.EventRouting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupImportRouting</h4>
<pre>protected&nbsp;void&nbsp;setupImportRouting(<a href="../../../../io/spine/server/route/EventRouting.html" title="class in io.spine.server.route">EventRouting</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;routing)</pre>
<div class="block">A callback for derived classes to customize routing schema for importable events.

 <p>The default routing uses producer ID of the event as the ID of the target aggregate.

 <p>This default routing requires that <code>Event</code> instances
 <a href="../../../../io/spine/server/bus/Bus.html#post-T-io.grpc.stub.StreamObserver-">Bus.post(io.spine.core.Signal, io.grpc.stub.StreamObserver)</a>  posted}
 for import must <code>contain</code> the ID of the
 target aggregate. Not providing a valid aggregate ID would result in
 <code>RuntimeException</code>.

 <p>Some aggregates may produce events with the aggregate ID as the first field of an event
 message. To set the default routing for repositories of such aggregates, please use the
 code below:

 <pre><code>
 routing.replaceDefault(EventRoute.byFirstMessageField(SomeId.class));
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routing</code> - the routing schema to customize.</dd>
</dl>
</li>
</ul>
<a name="create-java.lang.Object-">
<!--   -->
</a><a name="create-I-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;create(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html#create-I-">Repository</a></code></span></div>
<div class="block">Create a new entity instance with its default state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#create-I-">create</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the id of the entity</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>new entity instance</dd>
</dl>
</li>
</ul>
<a name="aggregateClass--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>aggregateClass</h4>
<pre>protected final&nbsp;<a href="../../../../io/spine/server/aggregate/model/AggregateClass.html" title="class in io.spine.server.aggregate.model">AggregateClass</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;&nbsp;aggregateClass()</pre>
<div class="block">Obtains class information of aggregates managed by this repository.</div>
</li>
</ul>
<a name="toModelClass-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toModelClass</h4>
<pre>protected&nbsp;<a href="../../../../io/spine/server/aggregate/model/AggregateClass.html" title="class in io.spine.server.aggregate.model">AggregateClass</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;&nbsp;toModelClass(java.lang.Class&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;&nbsp;cls)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html#toModelClass-java.lang.Class-">Repository</a></code></span></div>
<div class="block">Obtains a model class for the passed entity class value.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#toModelClass-java.lang.Class-">toModelClass</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
</dl>
</li>
</ul>
<a name="store-io.spine.server.aggregate.Aggregate-">
<!--   -->
</a><a name="store-A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre>protected final&nbsp;void&nbsp;store(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;aggregate)</pre>
<div class="block">Stores the passed aggregate and commits its uncommitted events.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#store-E-">store</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>aggregate</code> - an instance to store</dd>
</dl>
</li>
</ul>
<a name="doStore-io.spine.server.aggregate.Aggregate-">
<!--   -->
</a><a name="doStore-A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doStore</h4>
<pre>protected&nbsp;void&nbsp;doStore(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;aggregate)</pre>
</li>
</ul>
<a name="createStorage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createStorage</h4>
<pre>protected&nbsp;<a href="../../../../io/spine/server/aggregate/AggregateStorage.html" title="class in io.spine.server.aggregate">AggregateStorage</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;createStorage()</pre>
<div class="block">Creates aggregate storage for the repository.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#createStorage--">createStorage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>new storage</dd>
</dl>
</li>
</ul>
<a name="messageClasses--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageClasses</h4>
<pre>public final&nbsp;com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/CommandClass.html" title="class in io.spine.server.type">CommandClass</a>&gt;&nbsp;messageClasses()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/spine/server/bus/MessageDispatcher.html#messageClasses--">MessageDispatcher</a></code></span></div>
<div class="block">Obtains a set of message classes that can be processed by this dispatcher.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/bus/MessageDispatcher.html#messageClasses--">messageClasses</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/spine/server/bus/MessageDispatcher.html" title="interface in io.spine.server.bus">MessageDispatcher</a>&lt;<a href="../../../../io/spine/server/type/CommandClass.html" title="class in io.spine.server.type">CommandClass</a>,<a href="../../../../io/spine/server/type/CommandEnvelope.html" title="class in io.spine.server.type">CommandEnvelope</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-empty set of message classes</dd>
</dl>
</li>
</ul>
<a name="dispatch-io.spine.server.type.CommandEnvelope-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatch</h4>
<pre>public final&nbsp;void&nbsp;dispatch(<a href="../../../../io/spine/server/type/CommandEnvelope.html" title="class in io.spine.server.type">CommandEnvelope</a>&nbsp;cmd)</pre>
<div class="block">Dispatches the passed command to an aggregate.

 <p>The aggregate ID is obtained from the passed command.

 <p>The repository loads the aggregate by this ID, or creates a new aggregate
 if there is no aggregate with such ID.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/bus/MessageDispatcher.html#dispatch-E-">dispatch</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/spine/server/bus/MessageDispatcher.html" title="interface in io.spine.server.bus">MessageDispatcher</a>&lt;<a href="../../../../io/spine/server/type/CommandClass.html" title="class in io.spine.server.type">CommandClass</a>,<a href="../../../../io/spine/server/type/CommandEnvelope.html" title="class in io.spine.server.type">CommandEnvelope</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cmd</code> - the command to dispatch</dd>
</dl>
</li>
</ul>
<a name="events--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>events</h4>
<pre>public&nbsp;com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;&nbsp;events()</pre>
</li>
</ul>
<a name="domesticEvents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>domesticEvents</h4>
<pre>public&nbsp;com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;&nbsp;domesticEvents()</pre>
</li>
</ul>
<a name="externalEvents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalEvents</h4>
<pre>public&nbsp;com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;&nbsp;externalEvents()</pre>
</li>
</ul>
<a name="importableEvents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importableEvents</h4>
<pre>public&nbsp;com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;&nbsp;importableEvents()</pre>
<div class="block">Obtains classes of events that can be imported by aggregates of this repository.</div>
</li>
</ul>
<a name="outgoingEvents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outgoingEvents</h4>
<pre>public&nbsp;com.google.common.collect.ImmutableSet&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>&gt;&nbsp;outgoingEvents()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/spine/server/entity/EventProducingRepository.html#outgoingEvents--">EventProducingRepository</a></code></span></div>
<div class="block">Obtains classes of the events produced by entities of this repository.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/EventProducingRepository.html#outgoingEvents--">outgoingEvents</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/spine/server/entity/EventProducingRepository.html" title="interface in io.spine.server.entity">EventProducingRepository</a></code></dd>
</dl>
</li>
</ul>
<a name="dispatchEvent-io.spine.server.type.EventEnvelope-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchEvent</h4>
<pre>public&nbsp;void&nbsp;dispatchEvent(<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&nbsp;event)</pre>
<div class="block">Dispatches event to one or more aggregates reacting on the event.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - the event to dispatch</dd>
</dl>
</li>
</ul>
<a name="snapshotTrigger--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotTrigger</h4>
<pre>protected&nbsp;int&nbsp;snapshotTrigger()</pre>
<div class="block">Returns the number of events until a next <code>Snapshot</code> is made.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a positive integer value</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../io/spine/server/aggregate/AggregateRepository.html#DEFAULT_SNAPSHOT_TRIGGER"><code>AggregateRepository.DEFAULT_SNAPSHOT_TRIGGER</code></a></dd>
</dl>
</li>
</ul>
<a name="setSnapshotTrigger-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSnapshotTrigger</h4>
<pre>protected&nbsp;void&nbsp;setSnapshotTrigger(int&nbsp;snapshotTrigger)</pre>
<div class="block">Changes the number of events between making aggregate snapshots to the passed value.

 <p>The default value is defined in <a href="../../../../io/spine/server/aggregate/AggregateRepository.html#DEFAULT_SNAPSHOT_TRIGGER"><code>AggregateRepository.DEFAULT_SNAPSHOT_TRIGGER</code></a>.

 <p><b>NOTE</b>: repository read operations are optimized around the current snapshot
 trigger. Setting the snapshot trigger to a new value may cause read operations to perform
 sub-optimally, until a new snapshot is created. This doesn't apply to newly created
 repositories.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotTrigger</code> - a positive number of the snapshot trigger</dd>
</dl>
</li>
</ul>
<a name="aggregateStorage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>aggregateStorage</h4>
<pre>protected&nbsp;<a href="../../../../io/spine/server/aggregate/AggregateStorage.html" title="class in io.spine.server.aggregate">AggregateStorage</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&gt;&nbsp;aggregateStorage()</pre>
<div class="block">Returns the storage assigned to this aggregate.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>storage instance</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if the storage is null</dd>
</dl>
</li>
</ul>
<a name="doLoadOrCreate-java.lang.Object-">
<!--   -->
</a><a name="doLoadOrCreate-I-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doLoadOrCreate</h4>
<pre>protected&nbsp;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;doLoadOrCreate(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id)</pre>
</li>
</ul>
<a name="play-java.lang.Object-io.spine.server.aggregate.AggregateHistory-">
<!--   -->
</a><a name="play-I-io.spine.server.aggregate.AggregateHistory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>play</h4>
<pre>protected&nbsp;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&nbsp;play(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id,
                 io.spine.server.aggregate.AggregateHistory&nbsp;history)</pre>
<div class="block">Plays the given Aggregate history for an instance
 of <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate"><code>Aggregate</code></a> with the given ID.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the ID of the <code>Aggregate</code> to load</dd>
<dd><code>history</code> - the state record of the <code>Aggregate</code> to load</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an instance of <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate"><code>Aggregate</code></a></dd>
</dl>
</li>
</ul>
<a name="find-java.lang.Object-">
<!--   -->
</a><a name="find-I-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre>public&nbsp;java.util.Optional&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a>&gt;&nbsp;find(<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>&nbsp;id)
                           throws java.lang.IllegalStateException</pre>
<div class="block">Loads an aggregate by the passed ID.

 <p>An aggregate will be loaded even if
 <a href="../../../../io/spine/server/entity/WithLifecycle.html#isArchived--"><code>archived</code></a>
 or <a href="../../../../io/spine/server/entity/WithLifecycle.html#isDeleted--"><code>deleted</code></a> lifecycle
 attribute, or both of them, are set to <code>true</code>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#find-I-">find</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the ID of the aggregate to load</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the aggregate instance, or <code>empty()</code> if there is no
         aggregate with such ID</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>@OverridingMethodsMustInvokeSuper
public&nbsp;void&nbsp;close()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html#close--">Repository</a></code></span></div>
<div class="block">Closes the repository by closing the underlying storage.

 <p>The reference to the storage becomes null after this call.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/spine/server/entity/Repository.html#close--">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/entity/Repository.html" title="class in io.spine.server.entity">Repository</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">A</a> extends <a href="../../../../io/spine/server/aggregate/Aggregate.html" title="class in io.spine.server.aggregate">Aggregate</a>&lt;<a href="../../../../io/spine/server/aggregate/AggregateRepository.html" title="type parameter in AggregateRepository">I</a>,?,?&gt;&gt;</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/spine/server/aggregate/AggregatePartRepository.html" title="class in io.spine.server.aggregate"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/spine/server/aggregate/AggregateRoot.html" title="class in io.spine.server.aggregate"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/spine/server/aggregate/AggregateRepository.html" target="_top">Frames</a></li>
<li><a href="AggregateRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
