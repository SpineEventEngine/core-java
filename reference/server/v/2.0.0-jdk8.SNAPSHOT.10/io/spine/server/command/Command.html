<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Command (server 2.0.0-jdk8.SNAPSHOT.10 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Command (server 2.0.0-jdk8.SNAPSHOT.10 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/spine/server/command/Assign.html" title="annotation in io.spine.server.command"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/spine/server/command/Commander.html" title="interface in io.spine.server.command"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/spine/server/command/Command.html" target="_top">Frames</a></li>
<li><a href="Command.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.spine.server.command</div>
<h2 title="Annotation Type Command" class="title">Annotation Type Command</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Retention(value=RUNTIME)
 @Target(value=METHOD)
 @AcceptsExternal
public @interface <span class="memberNameLabel">Command</span></pre>
<div class="block">Marks a commanding method.

 <p>A commanding method <strong>must</strong>:
 <ul>
     <li>be annotated with <a href="../../../../io/spine/server/command/Command.html" title="annotation in io.spine.server.command"><code>@Command</code></a>;
     <li>accept one of the following as the first parameter:
     <ul>
        <li>a command message;
        <li>an event message;
        <li>a rejection message.
     </ul>
 </ul>

 <p>Like other message-handling methods, commanding methods are designed to be called by
 the framework only. Therefore, it is recommended to declare a them as package-private.
 It discourages a developer from calling these methods directly from anywhere.

 <p>Package-private access level still declares that a command handler method is a part
 of the Bounded Context-level API. See the <code>BoundedContext</code> description on how the packages and Bounded Contexts relate.

 <h1>Command Transformation</h1>

 <p>Commanding methods may be used to transform an incoming command with one or more commands.
 In this case the first method parameter must extend CommandMessage.
 The returning values must derive from the CommandMessage as well.

 <p>If a commanding method accepts a command type which is also handled by the application
 by another method, a run-time error will occur. This also means that an application cannot have
 two command-handling methods that accept the same command type.

 <h2>Accepted Parameters</h2>

 <p>There are several combinations of accepted parameters for a command-transforming method.
 The set of available parameters include

 <ul>

 <li>single command message:
 <pre>

  @Command
  ArchiveTask on(DeleteTask command) { ... }
 </pre>

 <li>a command message along with its context:
 <pre>

  @Command
  MoveTaskToDone on(CompleteTask command, CommandContext context) { ... }
 </pre>
 </ul>

 <h2>Returning Values</h2>

 <p>A command-transforming method always returns an outcome. Depending on the design intention,
 a type of an outcome may vary.

 <p>The command-transforming method must return either

 <ul>

 <li>a command message:
 <pre>

  @Command
  AssignTask on(StartTask command) { ... }
 </pre>


 <li><a href="../../../../io/spine/server/tuple/Either.html" title="class in io.spine.server.tuple">one of</a> of several command messages:
 <pre>

  @Command
  EitherOf2&lt;StopTask, PauseTask&gt; on(RemoveTaskFromProject command) { ... }
 </pre>


 <li>an <code>Iterable</code> of command messages:
 <pre>

  @Command
  Iterable&lt;PauseTask&gt; on(PauseProject command) { ... }
 </pre>


 <li>a <a href="../../../../io/spine/server/tuple/Tuple.html" title="class in io.spine.server.tuple"><code>tuple</code></a> of several command messages; being similar
 to <code>Iterable</code>, tuples allow to declare the exact types of returning values, including
 <code>Optional</code> values:

 <pre>

  @Command
  Pair&lt;AssignTask, Optional&lt;StartTask&gt;&gt; on(AddTaskToProject command) { ... }
 </pre>
 </ul>

 <h2>Rejecting Commands</h2>

 <p>As a command-handling method, a command-transforming method may reject an incoming command.
 In this case, it should declare a generated class derived from
 <code>ThrowableMessage</code> in <code>throws</code> clause:

 <pre>

  @Command
  AssignProject on(CreateProject command) throws CannotCreateProject { ... }
 </pre>

 <p>Throwing other types of <code>Throwable</code>s is not allowed in
 the command-transforming methods.


 <h1>Command Reaction</h1>

 <p>A commanding method may serve to emit commands in response to an incoming event. In this case
 its first parameter must be a message of either <code>EventMessage</code>
 or <code>RejectionMessage</code> type.

 <h2>Accepted Parameters</h2>

 <p>Command-reaction method must accept either

 <ul>

 <li>single event message:
 <pre>

  @Command
  ScheduleDelivery on(OrderPaid command) { ... }
 </pre>


 <li>an event message along with its context:
 <pre>

  @Command
  NotifyCustomer on(DeliveryScheduled event, EventContext context) { ... }
 </pre>


 <li>a rejection message:
 <pre>

  @Command
  CreateProject on(Rejections.CannotCreateProject rejection) {
      // Change the parameters and try again.
  }
 </pre>

 <li>a rejection message along with the context of the command which caused it:
 <pre>

  @Command
  ReassignTask on(Rejections.CannotStartTask rejection, CommandContext) { ... }
 </pre>

 </ul>

 <p>It is possible to receive external Events and Rejections. For that, mark the message parameter
 with the <code>@External</code> annotation. External Commands do not travel
 this way.

 <h2>Returning Values</h2>

 <p>A command-reacting method may emit one more more messages deriving from
 <code>CommandMessage</code>. The possibilities for the return values
 are flexible. They serve to describe the returning values as sharp as possible and thus
 reduce the probability of a human mistake.

 <p>A command-reacting method must return either
 <ul>

 <li>a command message:
 <pre>

  @Command
  ArchiveTask on(TaskCompleted event) { ... }
 </pre>


 <li>an <code>Optional</code> command message:
 <pre>

  @Command
  Optional&lt;StartTask&gt; on(TaskAdded event) { ... }
 </pre>


 <li><a href="../../../../io/spine/server/tuple/Either.html" title="class in io.spine.server.tuple">one of</a> of several command messages:
 <pre>

  @Command
  EitherOf2&lt;StopTask, PauseTask&gt; on(TaskReassigned event) { ... }
 </pre>


 <li>an <code>Iterable</code> of command messages:
 <pre>

  @Command
  List&lt;ArchiveTask&gt; on(ProjectCompleted event) { ... }
 </pre>


 <li>a <a href="../../../../io/spine/server/tuple/Tuple.html" title="class in io.spine.server.tuple"><code>tuple</code></a> of several command messages;
 it allows to declare the exact types of returning values, including <code>Optional</code>s:

 <pre>

  @Command
  Triplet&lt;AssignTask, UpdateTaskDueDate, Optional&lt;StartTask&gt;&gt; on(TaskCreated command) { ... }
 </pre>
 </ul>

 <p>If the annotation is applied to a method which doesn't satisfy either of these requirements,
 this method is not considered a commanding method and is <strong>not</strong> registered for
 command generation.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../io/spine/server/tuple/Tuple.html" title="class in io.spine.server.tuple"><code>Returning Two or More Command Messages</code></a>, 
<a href="../../../../io/spine/server/tuple/Either.html" title="class in io.spine.server.tuple"><code>Returning One of Command Messages</code></a>, 
<a href="../../../../io/spine/server/command/Assign.html" title="annotation in io.spine.server.command"><code>Handling Commands</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/command/Command.html#external--">external</a></span></code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">please use <code>@External</code> annotation for the first
         method parameter.</span></div>
</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="external--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>external</h4>
<pre>@Deprecated
public abstract&nbsp;boolean&nbsp;external</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">please use <code>@External</code> annotation for the first
         method parameter.</span></div>
<div class="block">When <code>true</code>, the annotated method receives an event generated from outside of the
 Bounded Context to which the annotated method's class belongs.

 <p>Should only be applied to commanding methods that accept an event or rejection as a
 parameter.

 <p>If applied to a command receiving method, the Model
 <a href="../../../../io/spine/server/model/ExternalCommandReceiverMethodError.html" title="class in io.spine.server.model">error</a> is produced.</div>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/spine/server/command/Assign.html" title="annotation in io.spine.server.command"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/spine/server/command/Commander.html" title="interface in io.spine.server.command"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/spine/server/command/Command.html" target="_top">Frames</a></li>
<li><a href="Command.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
