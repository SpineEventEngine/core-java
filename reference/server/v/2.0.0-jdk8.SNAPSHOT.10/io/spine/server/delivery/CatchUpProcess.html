<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>CatchUpProcess (server 2.0.0-jdk8.SNAPSHOT.10 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CatchUpProcess (server 2.0.0-jdk8.SNAPSHOT.10 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/spine/server/delivery/CatchUpColumn.html" title="class in io.spine.server.delivery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/spine/server/delivery/CatchUpProcess.DispatchCatchingUp.html" title="interface in io.spine.server.delivery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/spine/server/delivery/CatchUpProcess.html" target="_top">Frames</a></li>
<li><a href="CatchUpProcess.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.spine.server.delivery</div>
<h2 title="Class CatchUpProcess" class="title">Class CatchUpProcess&lt;I&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../io/spine/server/event/AbstractEventReactor.html" title="class in io.spine.server.event">io.spine.server.event.AbstractEventReactor</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">io.spine.server.event.AbstractStatefulReactor</a>&lt;io.spine.server.delivery.CatchUpId,io.spine.server.delivery.CatchUp,io.spine.server.delivery.CatchUp.Builder&gt;</li>
<li>
<ul class="inheritance">
<li>io.spine.server.delivery.CatchUpProcess&lt;I&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../io/spine/server/bus/MessageDispatcher.html" title="interface in io.spine.server.bus">MessageDispatcher</a>&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>,<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&gt;, <a href="../../../../io/spine/server/bus/MulticastDispatcher.html" title="interface in io.spine.server.bus">MulticastDispatcher</a>&lt;<a href="../../../../io/spine/server/type/EventClass.html" title="class in io.spine.server.type">EventClass</a>,<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&gt;, <a href="../../../../io/spine/server/event/EventDispatcher.html" title="interface in io.spine.server.event">EventDispatcher</a>, <a href="../../../../io/spine/server/event/EventReactor.html" title="interface in io.spine.server.event">EventReactor</a>, <a href="../../../../io/spine/server/event/EventReceiver.html" title="interface in io.spine.server.event">EventReceiver</a>, <a href="../../../../io/spine/server/EventProducer.html" title="interface in io.spine.server">EventProducer</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">CatchUpProcess&lt;I&gt;</span>
extends <a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">AbstractStatefulReactor</a>&lt;io.spine.server.delivery.CatchUpId,io.spine.server.delivery.CatchUp,io.spine.server.delivery.CatchUp.Builder&gt;</pre>
<div class="block">A process that performs a projection catch-up.

 <p>Starts the catch-up process by emitting the <code>CatchUpRequested</code> event.

 <p>Has its own <a href="../../../../io/spine/server/delivery/Inbox.html" title="class in io.spine.server.delivery"><code>Inbox</code></a>, so the messages arriving to it are dispatched by the
 <a href="../../../../io/spine/server/delivery/Delivery.html" title="class in io.spine.server.delivery"><code>Delivery</code></a>.

 <p>While recalling the event history, the process relies on the work of <code>Delivery</code>,
 which follows the status of the process and delivers messages in <code>TO_CATCH_UP</code> status
 instead of live <code>TO_DELIVER</code> messages to the catching-up targets.

 <p>The tricky part is so called "turbulence" period, i.e. the time when the catch-up comes
 close to the current time in the event history. In this phase the task is to understand when to
 stop reading the history and switch back to delivering the live events dispatched to the
 catching-up projections. To do so, a special <code>FINALIZING</code> status is introduced. Observed
 by <code>Delivery</code> it tells to perform a transition from dispatching <code>TO_CATCH_UP</code> events
 back to delivering those <code>TO_DELIVER</code>. See more on that below.

 <p>In this version of the process implementation, the turbulence period always equals 500 ms
 meaning that the catch-up starts its finalization when the event history is read
 up until <code>now - 500 ms</code>.

 <p>In its lifecycle, the process moves through the several statuses.

 <h3>Not started</h3>

 <p>The process is created in this status upon receiving the <code>CatchUpRequested</code> event.
 The further actions include:

 <ol>
     <li>A <code>CatchUpStarted</code> event is emitted. The target projection repository listens to
     this event and kills the state of the matching entities.

     <li>The status if the catch-up process is set to <code>IN_PROGRESS</code>.
 </ol>

 <h3>STARTED</h3>

 <p>The process is created in this status upon receiving the <code>CatchUpRequested</code> event.
 The further actions include:

 <ol>
     <li>A <code>CatchUpStarted</code> event is emitted. The target projection repository listens to
     this event and kills the state of the matching entities.

     <li>The status if the catch-up process is set to <code>IN_PROGRESS</code>.
 </ol>

 <h3><code>IN_PROGRESS</code></h3>

 <p>When the process is in this status, the event history is read and the matching events are sent
 to the <code>Inbox</code>es of the corresponding projections

 <p>The catch-up maintains this status until the history is read till the point in time,
 which is very close to the <code>Time.currentTime()</code>. When this time comes,
 the events arriving to the <code>EventStore</code> are very likely to be just-emitted in a live mode.
 Therefore, the process needs to decide whether to decide that the history is fully read, or
 to continue the traversal through the history.

 <p>At this stage the actions are as follows.

 <ol>
      <li>The historical event messages are read from the <a href="../../../../io/spine/server/event/EventStore.html" title="interface in io.spine.server.event"><code>EventStore</code></a> respecting
      the time range requested and the time of the last read operation performed by this process.
      The maximum number of the events read is determined by
      <a href="../../../../io/spine/server/delivery/DeliveryBuilder.html#setCatchUpPageSize-int-">one of the Delivery settings</a>.

      <li>Depending on the targets requested for the catch-up, the events are posted to the
      corresponding entities.

      <li>Unless the timestamps of the events are getting close to the current time, an
      <code>HistoryEventsRecalled</code> is emitted, leaving the process in the <code>IN_PROGRESS</code>
      status and triggering the next round similar to this one.

      <p>If the timestamps of the events read on this step are as close to the current time as
      the turbulence period, the <code>HistoryFullyRecalled</code> is emitted.
 </ol>

 <h3><code>FINALIZING</code></h3>

 <p>The process moves to this status when the event history has been fully recalled and the
 corresponding <code>HistoryFullyRecalled</code> is received. At this stage, the <code>Delivery</code> stops
 the propagation of the events to the catch-up messages, waiting for this process to populate
 the inboxes with the messages arriving to be dispatched during the turbulence period.
 Potentially, the inboxes will contain the duplicates produced by both the live users
 and this process. To deal with it, a deduplication is performed by the <code>Delivery</code>.
 See <code>CatchUpStation</code> for more details.

 <p>The historical data pushed by the catch-up is dispatched through a number of shards,
 each processed by the <code>Delivery</code> independently from each other. Starting to dispatch
 the events from a shard, <code>Delivery</code> reads the details of the ongoing catch-up processes.
 By interpreting the status of each catch-up, <code>Delivery</code> decides on the actions to apply
 to the historical events. For instance, the historical events dispatched from a catch-up which
 is already <code>COMPLETED</code> are considered junk and are immediately deleted.

 <p>Before moving to the catch-up completion, it is required to make sure every historical event
 has been seen and dispatched by the <code>Delivery</code>. So if the catch-up process is moved
 to the <code>COMPLETED</code> state too early, some historical events will get stuck in limbo, and
 will eventually be deleted.

 <p>It's important to understand that different shards may be processed at different speeds and
 potentially by different application nodes. Therefore, in order to switch to the
 <code>COMPLETED</code> status, a catch-up process must ensure that <b>each</b> shard was processed
 by the <code>Delivery</code> which witnessed the catch-up process in its <code>FINALIZING</code> state.
 Such an evidence would mean that this <code>Delivery</code> run is at the point in time by which
 three things already happened:

 <ol type="a">
     <li>the catch-up process has emitted all the events from the history,

     <li>the catch-up process has sent <code>HistoryFullyRecalled</code> after the historical events,

     <li>all these events were dispatched already â€” otherwise, the process wasn't going
     to be in its <code>FINALIZING</code> state.
 </ol>

 <p>In order to guarantee that prior to moving to the <code>COMPLETED</code> status, the catch-up
 process emits special <code>ShardProcessingRequested</code> events for each shard. The events are
 dispatched to a <code>ShardMaintenanceProcess</code>, which responds back by emitting
 <code>ShardProcessed</code> events. The <code>Delivery</code> knows about this special-case signals
 and appends the data in these events with its own picture of ongoing catch-up
 processes and their statuses. By receiving <code>ShardProcessed</code> events populated with this
 information the catch-up process knows which status was seen by the <code>Delivery</code>
 at the moment when it had been dispatching the events from a certain shard.

 <p>The actions at this stage are as follows.

 <ol>
      <li>All the remaining messages of the matching event types are read <a href="../../../../io/spine/server/event/EventStore.html" title="interface in io.spine.server.event"><code>EventStore</code></a>.
      In this operation the read limits set by the <code>Delivery</code> are NOT used, since
      the goal is to read the remainder of the events.

      <li>The <code>LiveEventsPickedUp</code> event is emitted. This allows some time for the posted
      events to become visible to the <code>Delivery</code>.

      <li>In the next round of delivery, the emitted <code>LiveEventsPickedUp</code> event is
      dispatched back to this process. By this time, the last batch of the historical events
      has already been sent to their destinations. However, not all of them may have been yet
      delivered due to their large number or to the I/O performance. To ensure that every
      historical event was seen by the <code>Delivery</code>, a special
      <code>ShardProcessingRequested</code> event is emitted for every shard involved into
      dispatching the historical events up until now.

      <li>Each <code>ShardProcessingRequested</code> event triggers the <code>Delivery</code> to read
      and dispatch the signals from a specific shard. Being sent, these events are dispatched
      to a special system <code>ShardMaintenanceProcess</code> serving as a handler. By reacting
      to a <code>ShardProcessingRequested</code>, the latter maintenance process emits
      a <code>ShardProcessed</code> event, telling that the <code>Delivery</code> has worked its way
      through the messages present in this shard.

      <li>The catch-up process handles each <code>ShardProcessed</code> event. By gathering the data
      from these events, the catch-up is able to tell when all the affected shards were
      fully processed by the <code>Delivery</code>. Once all shards are processed,
      a <code>CatchUpCompleted</code> event is emitted.
 </ol>

 <h3><code>COMPLETED</code></h3>

 <p>Once the <code>CatchUpCompleted</code> event is received, the process moves
 to the <code>COMPLETED</code> status. At this point, some live events and some historical events which
 were located in the "turbulence" window are still paused for dispatching. To ensure they are
 processed in each shard, the catch-up emits a number of <code>ShardProcessingRequested</code> events
 again. By dispatching them, it makes sure that the <code>Delivery</code> observes the change of
 catch-up status to <code>COMPLETED</code> and moves onto de-duplicating and delivering the previously
 "paused" events.

 <p>After that, a normal delivery flow is resumed. The catch-up process stops its execution.</div>
<dl>
<dt><span class="simpleTagLabel">Implementation Note:</span></dt>
<dd>Technically, the instances of this class are not
         <a href="../../../../io/spine/server/procman/ProcessManager.html" title="class in io.spine.server.procman">process managers</a>, since it is
         impossible to register the process managers with the same state in
         a multi-<code>BoundedContext</code> application.</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/delivery/CatchUpProcess.DispatchCatchingUp.html" title="interface in io.spine.server.delivery">CatchUpProcess.DispatchCatchingUp</a>&lt;<a href="../../../../io/spine/server/delivery/CatchUpProcess.DispatchCatchingUp.html" title="type parameter in CatchUpProcess.DispatchCatchingUp">I</a>&gt;</span></code>
<div class="block">A method object dispatching the event to catch-up.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/delivery/CatchUpProcess.html#canDispatch-io.spine.server.type.EventEnvelope-">canDispatch</a></span>(<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&nbsp;envelope)</code>
<div class="block">Checks if this dispatcher can dispatch the given message.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected java.util.Optional&lt;io.spine.server.delivery.CatchUp&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/delivery/CatchUpProcess.html#load-io.spine.server.delivery.CatchUpId-">load</a></span>(io.spine.server.delivery.CatchUpId&nbsp;id)</code>
<div class="block">Loads the state from the storage by ID.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected io.spine.server.delivery.CatchUp.Builder</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/delivery/CatchUpProcess.html#newStateBuilderWith-io.spine.server.delivery.CatchUpId-">newStateBuilderWith</a></span>(io.spine.server.delivery.CatchUpId&nbsp;id)</code>
<div class="block">Creates a new instance of the respective state <code>ValidatingBuilder</code> and sets the
 passed identifier to it.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected com.google.common.collect.ImmutableSet&lt;io.spine.server.delivery.CatchUpId&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/delivery/CatchUpProcess.html#route-io.spine.server.type.EventEnvelope-">route</a></span>(<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&nbsp;event)</code>
<div class="block">Selects the target to which the event should be dispatched.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/spine/server/delivery/CatchUpProcess.html#store-io.spine.server.delivery.CatchUp-">store</a></span>(io.spine.server.delivery.CatchUp&nbsp;updatedState)</code>
<div class="block">Stores the passed state in the storage.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.event.AbstractStatefulReactor">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;io.spine.server.event.<a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">AbstractStatefulReactor</a></h3>
<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#builder--">builder</a>, <a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#dispatch-io.spine.server.type.EventEnvelope-">dispatch</a>, <a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#flushState--">flushState</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.event.AbstractEventReactor">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;io.spine.server.event.<a href="../../../../io/spine/server/event/AbstractEventReactor.html" title="class in io.spine.server.event">AbstractEventReactor</a></h3>
<code><a href="../../../../io/spine/server/event/AbstractEventReactor.html#domesticEventClasses--">domesticEventClasses</a>, <a href="../../../../io/spine/server/event/AbstractEventReactor.html#externalEventClasses--">externalEventClasses</a>, <a href="../../../../io/spine/server/event/AbstractEventReactor.html#isRegistered--">isRegistered</a>, <a href="../../../../io/spine/server/event/AbstractEventReactor.html#messageClasses--">messageClasses</a>, <a href="../../../../io/spine/server/event/AbstractEventReactor.html#producerId--">producerId</a>, <a href="../../../../io/spine/server/event/AbstractEventReactor.html#registerWith-io.spine.server.BoundedContext-">registerWith</a>, <a href="../../../../io/spine/server/event/AbstractEventReactor.html#version--">version</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.EventProducer">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.server.<a href="../../../../io/spine/server/EventProducer.html" title="interface in io.spine.server">EventProducer</a></h3>
<code><a href="../../../../io/spine/server/EventProducer.html#nothing--">nothing</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.spine.server.event.EventDispatcher">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.spine.server.event.<a href="../../../../io/spine/server/event/EventDispatcher.html" title="interface in io.spine.server.event">EventDispatcher</a></h3>
<code><a href="../../../../io/spine/server/event/EventDispatcher.html#dispatchesEvents--">dispatchesEvents</a>, <a href="../../../../io/spine/server/event/EventDispatcher.html#dispatchesExternalEvents--">dispatchesExternalEvents</a>, <a href="../../../../io/spine/server/event/EventDispatcher.html#eventClasses--">eventClasses</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="canDispatch-io.spine.server.type.EventEnvelope-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canDispatch</h4>
<pre>public&nbsp;boolean&nbsp;canDispatch(<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&nbsp;envelope)</pre>
<div class="block">Checks if this dispatcher can dispatch the given message.

 <p>This method does not check that the type of the message is one of
 the <a href="../../../../io/spine/server/bus/MessageDispatcher.html#messageClasses--">dispatched message classes</a>. Instead, it validates
 the message upon some custom rules of this dispatcher.

 <p>Extend this method to forbid messages from being dispatched to this instance.

 <p>If the passed envelope is a <a href="../../../../io/spine/server/delivery/CatchUpSignal.html" title="interface in io.spine.server.delivery"><code>CatchUpSignal</code></a>, it is verified that the projection type
 URL passed with the event matches the one of the projection repository configured
 for this instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>envelope</code> - the message to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> is the given message can be dispatched by this dispatcher,
         <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="route-io.spine.server.type.EventEnvelope-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>route</h4>
<pre>protected&nbsp;com.google.common.collect.ImmutableSet&lt;io.spine.server.delivery.CatchUpId&gt;&nbsp;route(<a href="../../../../io/spine/server/type/EventEnvelope.html" title="class in io.spine.server.type">EventEnvelope</a>&nbsp;event)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#route-io.spine.server.type.EventEnvelope-">AbstractStatefulReactor</a></code></span></div>
<div class="block">Selects the target to which the event should be dispatched.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#route-io.spine.server.type.EventEnvelope-">route</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">AbstractStatefulReactor</a>&lt;io.spine.server.delivery.CatchUpId,io.spine.server.delivery.CatchUp,io.spine.server.delivery.CatchUp.Builder&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - the event to dispatch</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the set of the target identifiers</dd>
</dl>
</li>
</ul>
<a name="load-io.spine.server.delivery.CatchUpId-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>load</h4>
<pre>protected&nbsp;java.util.Optional&lt;io.spine.server.delivery.CatchUp&gt;&nbsp;load(io.spine.server.delivery.CatchUpId&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#load-I-">AbstractStatefulReactor</a></code></span></div>
<div class="block">Loads the state from the storage by ID.

 <p>Returns <code>Optional.empty()</code> if there is no such object found.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#load-I-">load</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">AbstractStatefulReactor</a>&lt;io.spine.server.delivery.CatchUpId,io.spine.server.delivery.CatchUp,io.spine.server.delivery.CatchUp.Builder&gt;</code></dd>
</dl>
</li>
</ul>
<a name="store-io.spine.server.delivery.CatchUp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre>protected&nbsp;void&nbsp;store(io.spine.server.delivery.CatchUp&nbsp;updatedState)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#store-S-">AbstractStatefulReactor</a></code></span></div>
<div class="block">Stores the passed state in the storage.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#store-S-">store</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">AbstractStatefulReactor</a>&lt;io.spine.server.delivery.CatchUpId,io.spine.server.delivery.CatchUp,io.spine.server.delivery.CatchUp.Builder&gt;</code></dd>
</dl>
</li>
</ul>
<a name="newStateBuilderWith-io.spine.server.delivery.CatchUpId-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>newStateBuilderWith</h4>
<pre>protected&nbsp;io.spine.server.delivery.CatchUp.Builder&nbsp;newStateBuilderWith(io.spine.server.delivery.CatchUpId&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#newStateBuilderWith-I-">AbstractStatefulReactor</a></code></span></div>
<div class="block">Creates a new instance of the respective state <code>ValidatingBuilder</code> and sets the
 passed identifier to it.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html#newStateBuilderWith-I-">newStateBuilderWith</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/spine/server/event/AbstractStatefulReactor.html" title="class in io.spine.server.event">AbstractStatefulReactor</a>&lt;io.spine.server.delivery.CatchUpId,io.spine.server.delivery.CatchUp,io.spine.server.delivery.CatchUp.Builder&gt;</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/spine/server/delivery/CatchUpColumn.html" title="class in io.spine.server.delivery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/spine/server/delivery/CatchUpProcess.DispatchCatchingUp.html" title="interface in io.spine.server.delivery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/spine/server/delivery/CatchUpProcess.html" target="_top">Frames</a></li>
<li><a href="CatchUpProcess.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
